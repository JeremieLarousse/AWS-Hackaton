-- MySQL Script generated by MySQL Workbench
-- Thu Jan  5 17:14:36 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema Enecom
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Enecom
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Enecom` DEFAULT CHARACTER SET utf8 ;
USE `Enecom` ;

-- -----------------------------------------------------
-- Table `Enecom`.`Team`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`Team` (
  `idTeam` INT NOT NULL AUTO_INCREMENT,
  `name_team` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idTeam`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Enecom`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`User` (
  `idUser` INT NOT NULL AUTO_INCREMENT,
  `firstname` VARCHAR(45) NOT NULL,
  `lastname` VARCHAR(45) NOT NULL,
  `admin` TINYINT NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `job_title` VARCHAR(45) NOT NULL,
  `location` VARCHAR(255) NOT NULL,
  `image_user` VARCHAR(2048) NOT NULL,
  `Team_idTeam` INT NOT NULL,
  PRIMARY KEY (`idUser`, `Team_idTeam`),
  INDEX `fk_User_Team1_idx` (`Team_idTeam` ASC) VISIBLE,
  CONSTRAINT `fk_User_Team1`
    FOREIGN KEY (`Team_idTeam`)
    REFERENCES `Enecom`.`Team` (`idTeam`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
ROW_FORMAT = DYNAMIC;

ALTER TABLE user
ALTER COLUMN image_user
SET
    DEFAULT "backend\public\assets\Enecom Images Default\enecom-image-avatar-default.jpg";
-- -----------------------------------------------------
-- Table `Enecom`.`PDC`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`PDC` (
  `idPDC` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(45) NOT NULL,
  `content` LONGTEXT NOT NULL,
  `category_id` INT NOT NULL,
  `archive` TINYINT NOT NULL,
  `date` DATE NOT NULL,
  `image_pdc` VARCHAR(1024) NOT NULL,
  `User_idUser` INT NOT NULL,
  `Team_idTeam` INT NOT NULL,
  PRIMARY KEY (`idPDC`, `User_idUser`, `Team_idTeam`),
  INDEX `fk_PDC_User_idx` (`User_idUser` ASC) VISIBLE,
  INDEX `fk_PDC_Team1_idx` (`Team_idTeam` ASC) VISIBLE,
  CONSTRAINT `fk_PDC_User`
    FOREIGN KEY (`User_idUser`)
    REFERENCES `Enecom`.`User` (`idUser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PDC_Team1`
    FOREIGN KEY (`Team_idTeam`)
    REFERENCES `Enecom`.`Team` (`idTeam`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

ALTER TABLE pdc
ALTER COLUMN image_pdc
SET
    DEFAULT "backend\public\assets\Enecom Images Default\enecom-image-plan-default.jpg";
-- -----------------------------------------------------
-- Table `Enecom`.`File`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`File` (
  `idFile` INT NOT NULL AUTO_INCREMENT,
  `file_column` VARCHAR(1024) NOT NULL,
  `PDC_idPDC` INT NOT NULL,
  `PDC_User_idUser` INT NOT NULL,
  PRIMARY KEY (`idFile`, `PDC_idPDC`, `PDC_User_idUser`),
  INDEX `fk_File_PDC1_idx` (`PDC_idPDC` ASC, `PDC_User_idUser` ASC) VISIBLE,
  CONSTRAINT `fk_File_PDC1`
    FOREIGN KEY (`PDC_idPDC` , `PDC_User_idUser`)
    REFERENCES `Enecom`.`PDC` (`idPDC` , `User_idUser`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Enecom`.`Category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`Category` (
  `idCategory` INT NOT NULL AUTO_INCREMENT,
  `name_category` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idCategory`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Enecom`.`Commentary`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`Commentary` (
  `idCommentary` INT NOT NULL AUTO_INCREMENT,
  `text_commentary` LONGTEXT NOT NULL,
  `PDC_idPDC` INT NOT NULL,
  `User_idUser` INT NOT NULL,
  `User_Team_idTeam` INT NOT NULL,
  PRIMARY KEY (`idCommentary`, `PDC_idPDC`, `User_idUser`, `User_Team_idTeam`),
  INDEX `fk_Commentary_PDC1_idx` (`PDC_idPDC` ASC) VISIBLE,
  INDEX `fk_Commentary_User1_idx` (`User_idUser` ASC, `User_Team_idTeam` ASC) VISIBLE,
  CONSTRAINT `fk_Commentary_PDC1`
    FOREIGN KEY (`PDC_idPDC`)
    REFERENCES `Enecom`.`PDC` (`idPDC`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Commentary_User1`
    FOREIGN KEY (`User_idUser` , `User_Team_idTeam`)
    REFERENCES `Enecom`.`User` (`idUser` , `Team_idTeam`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Enecom`.`PDC_has_Category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Enecom`.`PDC_has_Category` (
  `PDC_idPDC` INT NOT NULL,
  `PDC_User_idUser` INT NOT NULL,
  `PDC_Team_idTeam` INT NOT NULL,
  `Category_idCategory` INT NOT NULL,
  PRIMARY KEY (`PDC_idPDC`, `PDC_User_idUser`, `PDC_Team_idTeam`, `Category_idCategory`),
  INDEX `fk_PDC_has_Category_Category1_idx` (`Category_idCategory` ASC) VISIBLE,
  INDEX `fk_PDC_has_Category_PDC1_idx` (`PDC_idPDC` ASC, `PDC_User_idUser` ASC, `PDC_Team_idTeam` ASC) VISIBLE,
  CONSTRAINT `fk_PDC_has_Category_PDC1`
    FOREIGN KEY (`PDC_idPDC` , `PDC_User_idUser` , `PDC_Team_idTeam`)
    REFERENCES `Enecom`.`PDC` (`idPDC` , `User_idUser` , `Team_idTeam`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PDC_has_Category_Category1`
    FOREIGN KEY (`Category_idCategory`)
    REFERENCES `Enecom`.`Category` (`idCategory`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `Enecom`.`Team`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`Team` (`idTeam`, `name_team`) VALUES (1, 'Role principal');
INSERT INTO `Enecom`.`Team` (`idTeam`, `name_team`) VALUES (2, 'Investissement');
INSERT INTO `Enecom`.`Team` (`idTeam`, `name_team`) VALUES (3, 'Developpement');
INSERT INTO `Enecom`.`Team` (`idTeam`, `name_team`) VALUES (4, 'Marketing');
INSERT INTO `Enecom`.`Team` (`idTeam`, `name_team`) VALUES (5, 'Production');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Enecom`.`User`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (1, 'Ross', 'Geller', 1, 'rossgeller@friends.com', 'friends', 'Paleontologue', 'Nouvelle-Aquitaine', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-ross.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (2, 'Monica', 'Geller', 1, 'monicageller@friends.com', 'friends', 'Chef cuisinier', 'Auvergne-Rhone-Alpes', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-monica.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (3, 'Chandler', 'Bing', 1, 'chandlerbing@friends.com', 'friends', 'Developateur', 'Bourgogne-Franche-Comte', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-chandler.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (4, 'Joey', 'Tribbiani', 1, 'joeytribbiani@friends.com', 'friends', 'Intermittent du spectacle', 'Bretagne', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-joey.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (5, 'phoebe', 'Buffay', 1, 'phoebebuffay@friends.com', 'friends', 'Masseuse', 'Centre-Val de Loire', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-phoebe.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (12, 'Gunther', 'Tyler', 0, 'gunthertyler@friends.com', 'friends', 'Barman', 'Grand Est', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-gunther.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (7, 'Janice', 'Littman', 0, 'janicelittman@friends.com', 'friends', 'Vendeuse', 'Hauts-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-janice.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (8, 'Mike', 'Hannigan', 0, 'mikehannigan@friends.com', 'friends', 'Pianiste', 'Ile-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-mike.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (9, 'Jack', 'Geller', 0, 'jackgeller@friends.com', 'friends', 'Avocat', 'Normandie', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-jack.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (10, 'judy', 'Geller', 0, 'judygeller@friends.com', 'friends', 'Secretaire', 'Nouvelle-Aquitaine', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-judy.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (11, 'Ursula', 'Buffay', 0, 'ursulabuffay@friends.com', 'friends', 'Serveuse', 'Occitanie', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-ursula.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (6, 'Rachel', 'Green', 1, 'rachelgreen@friends.com', 'friends', 'Responsable de mode', 'Pays de la Loire', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-rachel.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (13, 'Richard', 'Burke', 0, 'richardburke@friends.com', 'friends', 'Ophtalmologiste', 'Provence-Alpes-Cote d’Azur', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-richard.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (14, 'Franck', 'Buffay', 0, 'franckbuffay@friends.com', 'friends', 'Figurant', 'Ile-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-franck.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (15, 'Carol', 'Geller', 0, 'carolgeller@friends.com', 'friends', 'Avocate', 'Occitanie', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-carol.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (16, 'David', 'Azaria', 0, 'davidazaria@freinds.com', 'friends', 'Scientifique', 'Hauts-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-david.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (17, 'Charlie', 'Wheeler', 0, 'charliewheeler@friends.com', 'friends', 'Paleontologue', 'Provence-Alpes-Cote d’Azur', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-charlie.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (18, 'Pete', 'Becker', 0, 'petebecker@friends.com', 'friends', 'Informaticien', 'Ile-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-pete.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (19, 'Larry', 'Heckles', 0, 'larryheckles@friends.com', 'friends', 'Coiffeur', 'Grand Est', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-larry.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (20, 'Julie', 'Tom', 0, 'julietom@friends.com', 'friends', 'Archeologue', 'Grand Est', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-julie.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (21, 'Kathy', 'Brewster', 0, 'kathybrewster@friends.com', 'friends', 'Actrice', 'Bretagne', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-kathy.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (22, 'Paul', 'Stevens', 0, 'paulstevens@friends.com', 'friends', 'Commercial', 'Centre-Val de Loire', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-paul.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (23, 'Will', 'Colbert', 0, 'willcolbert@friends.com', 'friends', 'Chauffeur', 'Bourgogne-Franche-Comte', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-will.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (24, 'Gary', 'Rapaport', 0, 'garyrapaport@friends.com', 'friends', 'Policier', 'Ile-de-France', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-gary.jpg', 1);
INSERT INTO `Enecom`.`User` (`idUser`, `firstname`, `lastname`, `admin`, `email`, `password`, `job_title`, `location`, `image_user`, `Team_idTeam`) VALUES (25, 'Danny', 'Newbern', 0, 'dannynewbern@friends.com', 'friends', 'Ingenieur', 'Auvergne-Rhone-Alpes', 'backend\\public\\assets\\Enecom Images Avatars\\enecom-image-avatar-danny.jpg', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Enecom`.`PDC`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`PDC` (`idPDC`, `title`, `content`, `category_id`, `archive`, `date`, `image_pdc`, `User_idUser`, `Team_idTeam`) VALUES (1, 'Voyage annuel', 'Ensemble des propositions de destinations concernant le voyage annuel.', 1, 0, '2022/12/22', 'https://cdn.pixabay.com/photo/2020/02/14/18/52/camels-4849179_1280.jpg', 1, 1);
INSERT INTO `Enecom`.`PDC` (`idPDC`, `title`, `content`, `category_id`, `archive`, `date`, `image_pdc`, `User_idUser`, `Team_idTeam`) VALUES (2, 'Service apres-vente', 'Nouveau service au 1er mars 2023', 2, 1, '2023/01/04', 'https://cdn.pixabay.com/photo/2018/02/12/14/01/devops-3148408_1280.jpg', 2, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Enecom`.`File`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`File` (`idFile`, `file_column`, `PDC_idPDC`, `PDC_User_idUser`) VALUES (1, 'https://cdn.pixabay.com/photo/2020/01/22/17/21/camel-4785794_1280.jpg', 1, 1);
INSERT INTO `Enecom`.`File` (`idFile`, `file_column`, `PDC_idPDC`, `PDC_User_idUser`) VALUES (2, 'https://cdn.pixabay.com/photo/2020/09/14/07/14/review-5570163_1280.jpg', 2, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `Enecom`.`Category`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (3, 'Marketing');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (4, 'Developpement');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (2, 'Plan de com. interne');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (1, 'Plan de com. externe');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (6, 'Role principal');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (5, 'Investissement');
INSERT INTO `Enecom`.`Category` (`idCategory`, `name_category`) VALUES (7, 'Production');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Enecom`.`Commentary`
-- -----------------------------------------------------
START TRANSACTION;
USE `Enecom`;
INSERT INTO `Enecom`.`Commentary` (`idCommentary`, `text_commentary`, `PDC_idPDC`, `User_idUser`, `User_Team_idTeam`) VALUES (1, 'En cours de programmation', 1, 4, 1);
INSERT INTO `Enecom`.`Commentary` (`idCommentary`, `text_commentary`, `PDC_idPDC`, `User_idUser`, `User_Team_idTeam`) VALUES (2, 'Fini', 2, 5, 1);

COMMIT;

