-- MySQL Script generated by MySQL Workbench
-- Wed Jan 11 12:22:59 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema aws
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema aws
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `aws` DEFAULT CHARACTER SET utf8 ;
USE `aws` ;

-- -----------------------------------------------------
-- Table `aws`.`Destination`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `aws`.`Destination` (
  `idGarage` INT NOT NULL AUTO_INCREMENT,
  `nom_destination` VARCHAR(124) NOT NULL,
  `distance` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idGarage`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aws`.`Mission`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `aws`.`Mission` (
  `idMission` INT NOT NULL AUTO_INCREMENT,
  `nom_mission` VARCHAR(45) NOT NULL,
  `durée` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idMission`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aws`.`Utilisateur`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `aws`.`Utilisateur` (
  `idUtilisateur` INT NOT NULL AUTO_INCREMENT,
  `nom_utilisateur` VARCHAR(45) NOT NULL,
  `admin` TINYINT NOT NULL,
  `compagnie` TINYINT NOT NULL,
  `salarié` TINYINT NOT NULL,
  PRIMARY KEY (`idUtilisateur`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aws`.`Voiture`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `aws`.`Voiture` (
  `idVoiture` INT NOT NULL AUTO_INCREMENT,
  `immatriculation` VARCHAR(45) NOT NULL,
  `maintenance` TINYINT NOT NULL,
  `marque` VARCHAR(45) NOT NULL,
  `modéle` VARCHAR(45) NOT NULL,
  `type` VARCHAR(124) NOT NULL,
  `date de mise en circulation` DATE NOT NULL,
  `disponible` TINYINT NOT NULL,
  `autonomie` VARCHAR(45) NOT NULL,
  `Destination_idGarage` INT NOT NULL,
  `Mission_idMission` INT NOT NULL,
  `Utilisateur_idUtilisateur` INT NOT NULL,
  PRIMARY KEY (`idVoiture`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`),
  INDEX `fk_Voiture_Destination_idx` (`Destination_idGarage` ASC) VISIBLE,
  INDEX `fk_Voiture_Mission1_idx` (`Mission_idMission` ASC) VISIBLE,
  INDEX `fk_Voiture_Utilisateur1_idx` (`Utilisateur_idUtilisateur` ASC) VISIBLE,
  CONSTRAINT `fk_Voiture_Destination`
    FOREIGN KEY (`Destination_idGarage`)
    REFERENCES `aws`.`Destination` (`idGarage`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Voiture_Mission1`
    FOREIGN KEY (`Mission_idMission`)
    REFERENCES `aws`.`Mission` (`idMission`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Voiture_Utilisateur1`
    FOREIGN KEY (`Utilisateur_idUtilisateur`)
    REFERENCES `aws`.`Utilisateur` (`idUtilisateur`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `aws`.`Destination`
-- -----------------------------------------------------
START TRANSACTION;
USE `aws`;
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (1, 'Parc machine', '0');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (3, 'Paris', '100');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (4, 'Nord', '500');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (5, 'Ouest', '700');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (6, 'Est', '900');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (7, 'Sud', '1100');
INSERT INTO `aws`.`Destination` (`idGarage`, `nom_destination`, `distance`) VALUES (2, 'Garage', '50');

COMMIT;


-- -----------------------------------------------------
-- Data for table `aws`.`Mission`
-- -----------------------------------------------------
START TRANSACTION;
USE `aws`;
INSERT INTO `aws`.`Mission` (`idMission`, `nom_mission`, `durée`) VALUES (4, 'Demarchage', '7');
INSERT INTO `aws`.`Mission` (`idMission`, `nom_mission`, `durée`) VALUES (3, 'Livraison', '1');
INSERT INTO `aws`.`Mission` (`idMission`, `nom_mission`, `durée`) VALUES (2, 'Reparation', '3');
INSERT INTO `aws`.`Mission` (`idMission`, `nom_mission`, `durée`) VALUES (1, 'Libre', '0');

COMMIT;


-- -----------------------------------------------------
-- Data for table `aws`.`Utilisateur`
-- -----------------------------------------------------
START TRANSACTION;
USE `aws`;
INSERT INTO `aws`.`Utilisateur` (`idUtilisateur`, `nom_utilisateur`, `admin`, `compagnie`, `salarié`) VALUES (1, 'Administrateur', 1, 0, 0);
INSERT INTO `aws`.`Utilisateur` (`idUtilisateur`, `nom_utilisateur`, `admin`, `compagnie`, `salarié`) VALUES (2, 'Compagnie', 0, 1, 0);
INSERT INTO `aws`.`Utilisateur` (`idUtilisateur`, `nom_utilisateur`, `admin`, `compagnie`, `salarié`) VALUES (3, 'Livreur', 0, 0, 1);
INSERT INTO `aws`.`Utilisateur` (`idUtilisateur`, `nom_utilisateur`, `admin`, `compagnie`, `salarié`) VALUES (4, 'Commercial', 0, 0, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aws`.`Voiture`
-- -----------------------------------------------------
START TRANSACTION;
USE `aws`;
INSERT INTO `aws`.`Voiture` (`idVoiture`, `immatriculation`, `maintenance`, `marque`, `modéle`, `type`, `date de mise en circulation`, `disponible`, `autonomie`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`) VALUES (1, 'ES-991-RL', 0, 'RENAULT', 'Clio', 'voiture', '2020-11-12', 1, '500', 1, 1, 1);
INSERT INTO `aws`.`Voiture` (`idVoiture`, `immatriculation`, `maintenance`, `marque`, `modéle`, `type`, `date de mise en circulation`, `disponible`, `autonomie`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`) VALUES (2, 'RT-123-YA', 1, 'RENAULT', 'Megane', 'berline', '2021-12-20', 0, '800', 2, 2, 2);
INSERT INTO `aws`.`Voiture` (`idVoiture`, `immatriculation`, `maintenance`, `marque`, `modéle`, `type`, `date de mise en circulation`, `disponible`, `autonomie`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`) VALUES (3, 'SD-588-CV', 0, 'PEUGEOT', 'C4', 'utilitaire', '2019-05-05', 0, '1000', 6, 4, 3);
INSERT INTO `aws`.`Voiture` (`idVoiture`, `immatriculation`, `maintenance`, `marque`, `modéle`, `type`, `date de mise en circulation`, `disponible`, `autonomie`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`) VALUES (4, 'Rainbow', 0, 'LICORNE', 'Multicolore', '4 pattes', '2000-01-01', 1, '1000000', 7, 3, 4);
INSERT INTO `aws`.`Voiture` (`idVoiture`, `immatriculation`, `maintenance`, `marque`, `modéle`, `type`, `date de mise en circulation`, `disponible`, `autonomie`, `Destination_idGarage`, `Mission_idMission`, `Utilisateur_idUtilisateur`) VALUES (5, 'UO-247-NG', 1, 'RENAULT', 'K2021', 'Camion', '2016-06-08', 0, '1600', 2, 2, 2);

COMMIT;

